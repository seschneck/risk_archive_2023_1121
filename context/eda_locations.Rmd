---
title: "Clean and process location data from interviews"
author: "Hannah Moshontz & John Curtin"
date: '`r format(Sys.time(), "%Y-%m-%d")`'
output: 
  html_document:
  toc: true 
  toc_depth: 4
editor_options: 
  chunk_output_type: console
---

### Code status

Under construction


### Notes

Purpose: This file summarizes the location labels supplied by participants for the Liu et al. GPS project. In that project, place labels (supplied by participants) are predicted by geospatial and temporal features of people's GPS data in the risk project. In this markdown, I aim to:
1. Recommend what data to exclude on the basis of: multiple homes, multiple workplaces, out of state residence or workplaces. We want to preserve as much data as possible.
2. Characterize place proximity to understand about how many of these observations / labels are for the same place (but have different lat/long).
3. Understand meaningful, risk-related clusters of labels. We want these labels to be useful for inclusion in models like the kind we are creating for the primary aims of the risk and risk2 projects.
4. Identify any "other" labels that fit existing factor levels. The goal is for these labels to be as accurate as possible, since they serve as ground truth.

Inputs:  Opens data files in path_raw

* locations.csv

### Setup

Paths 
```{r}
path_processed <- "P:/studydata/risk/data_processed" 
```

Packages and Source
```{r, message = FALSE, warning = FALSE}
library(tidyverse)
library(lubridate)
library(janitor)
library(purrr)
```

### Import locations files

```{r}
locations <- read_csv(file.path(path_processed, "locations.csv")) %>% 
  mutate(across(where(is_character), str_to_lower),
         across(
           c("type", 
             "drank",
             "alcohol",
             "emotion",
             "risk",
             "avoid",
             "vacation"),
           as_factor),
         date_of_observation = as_datetime(utc, tz = "America/Chicago")) %>% 
  select(-utc) %>% 
  glimpse()
```


### EDA

1. Recommend what data to exclude on the basis of: multiple homes, multiple workplaces, out of state residence or workplaces. We want to preserve as much data as possible.


```{r}
locations %>% 
  
```


2. Characterize place proximity to understand about how many of these observations / labels are for the same place (but have different lat/long).


```{r}

```


3. Understand meaningful, risk-related clusters of labels. We want these labels to be useful for inclusion in models like the kind we are creating for the primary aims of the risk and risk2 projects.


```{r}

```


4. Identify any "other" labels that fit existing factor levels. The goal is for these labels to be as accurate as possible, since they serve as ground truth.


```{r}

```

